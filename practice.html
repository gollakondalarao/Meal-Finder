<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meals Deal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;
}

/* Navbar */
.navbar {
  background-color: #ff6f00;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 50px;
  padding: 0 20px;
}

.navbar .logo {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
}

/* Search Container */
.container {
  background: url("./assets/banner.jpeg");
  border-radius: 12px;
  padding: 20px;
  height: 300px;
  text-align: center;
}

.search-bar {
  margin: 20px 0;
}

.search-bar input {
  width: 30%;
  padding: 15px;
  border: 1px solid #ccc;
  border-radius: 25px;
  font-size: 16px;
}

.search-bar button {
  border: none;
  color: black;
  font-size: 18px;
  padding: 8px;
  border-radius: 50%;
  cursor: pointer;
}

/* Personalize Heading */
.personalize {
  color: white;
  font-size: 20px;
}

/* Categories */
.categories {
  width: 90px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  padding: 2rem;
}

.category {
  width: 260px;
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 1rem;
  text-align: left;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease;
}

.category:hover {
  transform: scale(1.05);
}

.category img {
  max-width: 100%;
  border-radius: 8px;
}

.category h3 {
  margin: 0;
  background: rgba(255, 87, 34, 0.8);
  color: white;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  margin-left: 110px;
  margin-right: 50px;
}

/* Menu */
.menu {
  position: relative;
}

.menu-btn {
  background-color: #d35400;
  color: white;
  border: none;
  padding: 10px;
  font-size: 18px;
  cursor: pointer;
  border-radius: 4px;
}

.menu-list {
  list-style: none;
  padding: 0;
  margin: 0;
  position: absolute;
  background-color: white;
  border: 1px solid #ddd;
  border-radius: 4px;
  display: none;
  width: 150px;
  margin-left: -100px;
}

.menu-list li {
  padding: 10px;
  cursor: pointer;
}

.menu-list li:hover {
  background-color: #f4f4f4;
}

/* Meals Container */
.meals-container {
  display: grid;
  grid-template-columns: repeat(5,1fr);
  gap: 20px;
  margin-top: 20px;
  margin-left: 10px;
}

.meal-card {
  background: white;
  border-radius: 10px;
  text-align: center;
}

.meal-card img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 10px;
}

.meal-card h3 {
  padding: 10px;
  font-size: 18px;
}



    </style>
</head>
<body>
    <header class="navbar">
        <div class="logo">
            <span><i class="fa-solid fa-house-circle-exclamation"></i> MEAL FINDER</span>
        </div>

        <div class="menu">
            <button id="btn" class="menu-btn">â˜°</button>
            <ul id="menu-list" class="menu-list">
                <li data-category="Beef">Beef</li>
                <li data-category="Chicken">Chicken</li>
                <li data-category="Dessert">Dessert</li>
                <li data-category="Lamb">Lamb</li>
                <li data-category="Miscellaneous">Miscellaneous</li>
                <li data-category="Pasta">Pasta</li>
                <li data-category="Pork">Pork</li>
                <li data-category="Seafood">Seafood</li>
                <li data-category="Side">Side</li>
                <li data-category="Starter">Starter</li>
                <li data-category="Vegan">Vegan</li>
                <li data-category="Vegetarian">Vegetarian</li>
            </ul>
        </div>
    </header>

    <div class="container">
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Search recipes here ...">
            <button id="search-btn"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
        <h1>What are your favorite cuisines?</h1>
        <h2 class="personalize">PERSONALIZE YOUR EXPERIENCE</h2>
    </div>

    <!-- Category Section -->
    <section>
        <h1>Categories</h1>
        <div class="categories" id="categories"></div>
    </section>

    <!-- Category Description -->
    <section id="categoryDescription" class="description-box" style="display: none;"></section>

    <!-- Meals Section -->
    <section>
        <strong id="mealTitle" style="display: none;  
        padding: 20px;
        margin: 30px auto;
        border: 3px solid #8B0000;
        background-color: white;
        border-radius: 10px;
        text-align: justify;
        font-family: Arial, sans-serif;">Meals</strong>
        
        <div id="mealsContainer" class="meals-container"></div>
        <div id="mealDetail" class="mealDetail"></div>

    </section>


    <script>

//  ///////////////////////catogery section ////////////////////////////

        document.addEventListener("DOMContentLoaded", () => {     
    fetchCategories();     
    setupMenu();     
});

let categoryDescriptions = {};
async function fetchCategories() {     
    try {
        const response = await fetch('https://www.themealdb.com/api/json/v1/1/categories.php');     
        const data = await response.json();     
      
        
        displayCategories(data.categories);  
    } catch (error) {
        console.error("Error fetching categories:", error);
    }
}

function displayCategories(categories) {     
    const categoriesContainer = document.getElementById('categories');     
    
    categoriesContainer.innerHTML = categories.map(category => {  
       
        categoryDescriptions[category.strCategory] = category.strCategoryDescription;  


        return `         
            <div class="category" data-category="${category.strCategory}">             
                <h3>${category.strCategory}</h3>       
                      
                <img src="${category.strCategoryThumb}" alt="${category.strCategory}">  
                
            </div>`;    
            ;
             
    }).join('');

   
    document.querySelectorAll('.category').forEach(categoryElement => {
        categoryElement.addEventListener('click', () => {
            const selectedCategory = categoryElement.getAttribute('data-category');
            fetchMealsByCategory(selectedCategory);
        });
    });
}
  
////////////////////////////menu section/////////////////////////////////////

function setupMenu() {     
    const menuBtn = document.getElementById('btn');     
    const menuList = document.getElementById('menu-list');     
    const categoriesContainer = document.getElementById('categories');     
    const mealsContainer = document.getElementById('mealsContainer');          

    menuBtn.addEventListener('click', () => {         
        menuList.style.display = menuList.style.display === 'block' ? 'none' : 'block';     
    });          

    menuList.addEventListener('click', (event) => {         
        if (event.target.tagName === 'LI') {             
            const selectedCategory = event.target.getAttribute('data-category');             
            fetchMealsByCategory(selectedCategory);             
            menuList.style.display = 'none';              

            categoriesContainer.style.display = 'none';             
            mealsContainer.style.display = 'grid';          
        }     
    }); 
}  
          
//////////////////////filter products////////////////////////////////////////

async function fetchMealsByCategory(category) {     
    try {
        const response = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`);     
        const data = await response.json();     
        displayMeals(data.meals, category);
    } catch (error) {
        console.error("Error fetching meals:", error);
    }
}  

function displayMeals(meals, category) {     
    const categoriesContainer = document.getElementById('categories');  
    const mealsContainer = document.getElementById('mealsContainer');  
    const mealTitle = document.getElementById('mealTitle');



    categoriesContainer.style.display = 'none';     
    mealsContainer.style.display = 'grid';      

    mealsContainer.innerHTML = meals.map(meal => ` 
                
        <div class="meal-card">     
                
            <img src="${meal.strMealThumb}" alt="${meal.strMeal}">             
            <h3>${meal.strMeal}</h3>         
        </div>     
    `).join('');

    if (mealsContainer) {

        const description = categoryDescriptions[category]  || "No description available."; 
        mealTitle.innerHTML = `
        <h1>${category}</h1> 
        <p>${description}</p>`; 
        mealTitle.style.display = 'block';
    }
}

        ////////////////////// single product page ////////////////////////

        
async function fetchMealDetails(mealId) {
    try {
        const response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`);
        const data = await response.json();
        displayMealDetails(data.meals[0]);

    } catch (error) {
        console.error("Error fetching meal details:", error);
    }
}

function displayMealDetails(meal) {
    const mealsContainer = document.getElementById('mealsContainer');
    const mealDetailContainer = document.getElementById('mealDetail');
    
    mealsContainer.style.display = 'none';
    mealDetailContainer.style.display = 'block';
    
    mealDetailContainer.innerHTML = `
        <div class="meal-detail">
            <h1>${meal.strMeal}</h1>
            <img src="${meal.strMealThumb}" alt="${meal.strMeal}">
            <p><strong>Category:</strong> ${meal.strCategory}</p>
            <p><strong>Area:</strong> ${meal.strArea}</p>
            <p><strong>Instructions:</strong> ${meal.strInstructions}</p>
            <button id="backBtn">Back to Meals</button>
        </div>
    `
    
    document.getElementById("backBtn").addEventListener("click", () => {
        mealDetailContainer.style.display = 'none';
        mealsContainer.style.display = 'grid';
    });
}

document.addEventListener("click", (event) => {
    if (event.target.closest(".meal-card")) {
        const mealId = event.target.closest(".meal-card").getAttribute("data-meal-id");
        fetchMealDetails(mealId);
    }
});
      
    </script>
</body>
</html>